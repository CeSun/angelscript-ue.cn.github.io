<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://docs.angelscript-ue.g1sgame.com/docs.css">
    <link rel="icon" href="https://docs.angelscript-ue.g1sgame.com/favicon.svg">
    <title> AngelScript虚幻引擎文档 | 预编译脚本 </title>
</head>
<body>
	<main>
		<nav>
			<a href="https:&#x2F;&#x2F;docs.angelscript-ue.g1sgame.com">
				<img src="https://docs.angelscript-ue.g1sgame.com/angelscript_unreal.png" alt=""/>
			</a>

			<ul>
				<li>
					<a href="https:&#x2F;&#x2F;docs.angelscript-ue.g1sgame.com">主页</a>
				</li>
				<li>
					<a href="https://discord.gg/39wmC2e">加入Discord讨论群</a>
				</li>
				<li>
					<a href="https://angelscript.hazelight.se/api">API文档</a>
				</li>
			</ul>

			<label>开始上手</label>
				<ul>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/getting-started/installation/">安装</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/getting-started/introduction/">脚本介绍</a>
				</li>
				</ul>
			<label>脚本特性</label>
				<ul>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/functions-and-events/">函数和事件</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/properties-and-accessors/">属性和访问器</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/actors-components/">Actors 和 Components</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/function-libraries/">函数库</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/fname-literals/">FName字面量</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/format-strings/">格式化字符串</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/structs-refs/">值类型和引用类型</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/networking-features/">网络特性</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/delegates/">委托和事件</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/mixin-methods/">扩展函数(Mixin)</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/gameplaytags/">Gameplay Tags</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/editor-script/">仅编辑器脚本</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/subsystems/">Subsystems</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/script-tests/">测试脚本</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/scripting/cpp-differences/">和C++的区别</a>
				</li>
				</ul>
			<label>C++用法和绑定</label>
				<ul>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/cpp-bindings/automatic-bindings/">自动绑定</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/cpp-bindings/mixin-libraries/">扩展函数(Mixin)</a>
				</li>
				<li class="active">
					<a href="https://docs.angelscript-ue.g1sgame.com/cpp-bindings/precompiled-data/">预编译脚本</a>
				</li>
				</ul>
			<label>UE-AS 脚本发展</label>
				<ul>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/project/development-status/">项目现状</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/project/resources/">相关资源</a>
				</li>
				<li >
					<a href="https://docs.angelscript-ue.g1sgame.com/project/license/">开源授权</a>
				</li>
				</ul>
			</nav>
		<article>
			
	<h1 id="using-precompiled-scripts">Using Precompiled Scripts</h1>
<h2 id="functionality">Functionality</h2>
<p>Normally, when the engine starts up the angelscript plugin will read all <code>.as</code> files in
your Project's script folder and parse and compile them. This can take a relatively long
amount of time, especially on platforms with slower CPUs and hard drives.</p>
<p>In order to improve startup time in packaged builds, it is possible to instruct the
packaged binary to emit a precompiled script cache. When a precompiled script
cache file is present, the plugin will load the compiled script bytecode directly
from the cache, skipping the need to load, parse and compile all the script
files.</p>
<p>In addition to this, the plugin is able to generate a directory of C++ code files
that function the same as the angelscript bytecode for your scripts. Recompiling
the game binary with these C++ files included in it will then hook into angelscript's
JIT compilation system to replace virtual machine bytecode execution with native C++.
This significantly improves runtime execution speed of script code.</p>
<h2 id="usage">Usage</h2>
<p>Precompiled script must be generated by the same <code>.exe</code> binary that it will be loaded by.</p>
<p>To trigger the generation:</p>
<ul>
<li>Package your game in the configuration you want to run.</li>
<li>Run your <code>ProjectName.exe</code> while specifying the <code>-as-generate-precompiled-data</code> command line parameter.</li>
</ul>
<p>This generates a file <code>ProjectName/Script/PrecompiledScript.Cache</code> that should be part of your game distribution.</p>
<p>The next time you run your packaged game, script will be loaded from the precompiled cache instead of from the <code>.as</code> scripts.</p>
<h2 id="transpiled-c-code">Transpiled C++ Code</h2>
<p>In addition to the cache, the generate step will also output a folder called <code>AS_JITTED_CODE/</code> with a file in it for every script file that was compiled.</p>
<p>You can copy this folder into your project's source folder and then rebuild the <code>.exe</code> for your game in the appropriate configuration.</p>
<p>Using the new <code>.exe</code> compiled with the included <code>AS_JITTED_CODE/</code> and in combination with the <code>PrecompiledScript.Cache</code> file will let the
angelscript plugin automatically run the correct optimized C++ code when executing angelscript.</p>
<h2 id="compatibility">Compatibility</h2>
<p>Because precompiled scripts directly contain hardcoded byte offsets to C++ properties and sizes of C++ structures,
you should never use a <code>PrecompiledScript.Cache</code> file that was generated by a different binary than it is being used by.</p>
<p>Whenever you rebuild your game's packaged <code>.exe</code>, <strong>always</strong> regenerate the precompiled script cache from that <code>.exe</code>.
(The necessary exception of course being the rebuild when you add the generated C++ code to the binary)</p>
<p>The inverse is not necessary: it is possible to change the <code>.as</code> script files and generate a new <code>PrecompiledScript.Cache</code>
without recompiling the game binary.
If the old binary contained generated C++ code, it will no longer match the precompiled script cache and will not be used until the binary is rebuilt with the new <code>AS_JITTED_CODE</code>.</p>
<h2 id="reloading-scripts">Reloading Scripts</h2>
<p>When using a <code>PrecompiledScript.Cache</code> file, the actual <code>.as</code> script files are not loaded from the script folder. This means
changes to those files will not be used, and hot reload is disabled.</p>
<p>In order to circumvent loading precompiled scripts when they are present, you can pass the <code>-as-development-mode</code> command line parameter to your packaged game binary.</p>

</article>
	</main>
</body>